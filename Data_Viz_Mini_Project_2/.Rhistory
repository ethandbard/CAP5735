aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients") +
ggplot2::annotate("text", x = 100, y = 100, "test")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients") +
ggplot2::annotate("text", x = 100, y = 2, "test")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients")
ggsave("../images/house_coefs.svg", device = "svg")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients") +
ggplot2::annotate("text", x = 100, y = 'FLOORS1.5', "test")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients") +
ggplot2::annotate("text", x = 100, y = FLOORS1.5, "test")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients") +
ggplot2::annotate("text", x = 100, "test")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients")
ggsave("../images/house_coefs.svg", device = "svg")
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'rect',
xmin = 0, xmax = 0.4,
ymin = 7.9, 8.75,
fill = "red", alpha = 0.2)
p <- ggplotly(p)
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'rect',
xmin = 0, xmax = 0.4,
ymin = 7.9, ymax = 8.75,
fill = "red", alpha = 0.2)
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'rect',
xmin = 0, xmax = 0.25,
ymin = 7.9, ymax = 8.9,
fill = "red", alpha = 0.2)
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'rect',
xmin = 0, xmax = 0.25,
ymin = 7.9, ymax = 8.9,
fill = "red", alpha = 0.2,
label = "Ideal Range")
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.5, y = 8.5,
label = "Lakes with less mercury appear to have higher pH and more algae."
p <- ggplotly(p)
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.5, y = 8.5,
label = "Lakes with less mercury appear to have higher pH and more algae.")
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 1, y = 8.5,
label = "Lakes with less mercury appear to have higher pH and more algae.")
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 1, y = 8.5,
label = "Healthy Lakes")
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.5, y = 8.5,
label = "Healthy Lakes")
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.25, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
)
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.25, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.3, xend = 0.3,
y = 7.2, yend = 7.9,
arrow = arrow(length = unit(0.1, "in")))
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.3,
y = 7.2, yend = 7.9,
arrow = arrow(length = unit(0.1, "in")))
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.9,
arrow = arrow(length = unit(0.1, "in")))
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.5,
arrow = arrow(length = unit(0.1, "in")))
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.7,
arrow = arrow(length = unit(0.1, "in")))
p <- ggplotly(p)
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.7,
arrow = arrow(length = unit(0.1, "in")))
#p <- ggplotly(p)
p
p <- ggplot(pinellas_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Pinellas County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen")
p
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.7,
arrow = arrow(length = unit(0.1, "in")))
library(tidyverse)
library(sf)
library(plotly)
library(RColorBrewer)
library(data.table)
library(tm)
lakes <- read_csv("../data/FloridaLakes.csv")
lake_shapes <- read_sf("../data/Florida_Lakes/Florida_Lakes.shp")
glimpse(lakes)
polk_lakes <- filter(lake_shapes, COUNTY == "POLK")
polk_lakes$NAME <- removeWords(polk_lakes$NAME, c("Lake ", " Lake"))
lakes <- lakes %>%
mutate(NAME = Lake)
colnames(lakes)
polk_lake_shapes <- left_join(polk_lakes, lakes, by = "NAME") %>%
filter(!is.na(ID))
polk_lake_shapes
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.7,
arrow = arrow(length = unit(0.1, "in")))
#p <- ggplotly(p)
p
ggsave("../images/polk_lakes.svg", device = "svg")
library(tidyverse)
library(sf)
library(plotly)
library(RColorBrewer)
library(data.table)
library(tm)
lakes <- read_csv("../data/FloridaLakes.csv")
lake_shapes <- read_sf("../data/Florida_Lakes/Florida_Lakes.shp")
polk_lakes <- filter(lake_shapes, COUNTY == "POLK")
polk_lakes$NAME <- removeWords(polk_lakes$NAME, c("Lake ", " Lake"))
lakes <- lakes %>%
mutate(NAME = Lake)
polk_lake_shapes <- left_join(polk_lakes, lakes, by = "NAME") %>%
filter(!is.na(ID))
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
ggplotly(p)
library(tidyverse)
library(sf)
library(plotly)
library(RColorBrewer)
library(data.table)
library(tm)
lakes <- read_csv("../data/FloridaLakes.csv")
lake_shapes <- read_sf("../data/Florida_Lakes/Florida_Lakes.shp")
polk_lakes <- filter(lake_shapes, COUNTY == "POLK")
polk_lakes$NAME <- removeWords(polk_lakes$NAME, c("Lake ", " Lake"))
lakes <- lakes %>%
mutate(NAME = Lake)
polk_lake_shapes <- left_join(polk_lakes, lakes, by = "NAME") %>%
filter(!is.na(ID))
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
ggplotly(p)
htmltools::includeHTML("../images/PolkLakes.html" )
htmltools::includeHTML("../images/PolkLakes.html" )
htmltools::includeHTML("../images/PolkLakes.html" )
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
p <- ggplotly(p)
htmlwidgets::saveWidget(p, "PolkLakes.html")
htmltools::includeHTML("../images/PolkLakes.html" )
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
p <- ggplotly(p)
htmlwidgets::saveWidget(p, "../images/PolkLakes.html")
htmltools::includeHTML("../images/PolkLakes.html" )
htmltools::knit_print.html("../images/PolkLakes.html")
cat(plotly:::plotly_iframe())
cat(plotly:::plotly_iframe(p))
cat(plotly:::plotly_iframe())
htmltools::includeHTML("../images/PolkLakes.html", scrolling="no")
htmltools::tags$iframe(
src = "../images/PolkLakes.html"
)
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
p <- ggplotly(p)
htmlwidgets::saveWidget(p, "../images/PolkLakes.html")
save(p, file = "PolkLakes.rda")
library(plotly)
load("PolkLakes.rda")
p
library(plotly)
load("PolkLakes.rda")
library(plotly)
load("PolkLakes.rda")
p
library(tidyverse)
library(sf)
library(plotly)
library(RColorBrewer)
library(data.table)
library(tm)
lakes <- read_csv("../data/FloridaLakes.csv")
lake_shapes <- read_sf("../data/Florida_Lakes/Florida_Lakes.shp")
glimpse(lakes)
polk_lakes <- filter(lake_shapes, COUNTY == "POLK")
polk_lakes$NAME <- removeWords(polk_lakes$NAME, c("Lake ", " Lake"))
lakes <- lakes %>%
mutate(NAME = Lake)
colnames(lakes)
polk_lake_shapes <- left_join(polk_lakes, lakes, by = "NAME") %>%
filter(!is.na(ID))
polk_lake_shapes
p <- ggplot(polk_lake_shapes, aes(x = AvgMercury, y = pH, color = Chlorophyll, size = Calcium)) +
geom_point(aes(text = Lake)) +
theme_minimal() +
labs(title = "Polk County Lakes") +
scale_color_gradient(low = "gray", high = "DarkGreen") +
ggplot2::annotate(geom = 'text',
x = 0.15, y = 7,
label = "Healthy Lakes") +
ggplot2::annotate(geom = "segment",
x = 0.15, xend = 0.15,
y = 7.2, yend = 7.7,
arrow = arrow(length = unit(0.1, "in")))
#p <- ggplotly(p)
p
ggsave("../images/polk_lakes.svg", device = "svg")
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
p <- ggplotly(p)
save(p, file = "PolkLakes.rda")
p <- ggplot() +
geom_sf(data = polk_lake_shapes, aes(text = NAME, fill = Chlorophyll)) +
theme_minimal() +
ggtitle("Polk County Lakes") +
scale_fill_gradient(low = "gray", high = "DarkGreen")
p <- ggplotly(p)
p
save(p, file = "PolkLakes.rda")
library(tidyverse)
library(broom)
library(plotly)
library(GGally)
library(kableExtra)
library(magick)
library(webshot)
webshot::install_phantomjs()
houses <- read_csv("../data/WestRoxbury.csv")
glimpse(houses)
houses <- houses %>%
mutate(FLOORS = factor(FLOORS),
ROOMS = factor(ROOMS),
BEDROOMS = factor(BEDROOMS),
FULL_BATH = factor(`FULL BATH`),
HALF_BATH = factor(`HALF BATH`),
KITCHEN = factor(KITCHEN),
FIREPLACE = factor(FIREPLACE),
REMODEL = factor(REMODEL),
TOTAL_VALUE = `TOTAL VALUE`,
LOT_SQFT = `LOT SQFT`,
GROSS_AREA = `GROSS AREA`,
LIVING_AREA = `LIVING AREA`,
YEAR = `YR BUILT`) %>%
select(-c(`TOTAL VALUE`, `LOT SQFT`, `GROSS AREA`, `LIVING AREA`, `FULL BATH`, `HALF BATH`, `YR BUILT`))
glimpse(houses)
ggplot(houses, aes(TOTAL_VALUE)) +
geom_histogram(binwidth = 10, color = "black", fill = "gray") +
theme_minimal() +
xlab("Total Value (Thousands)") +
ylab("") +
ggtitle("West Roxbury Housing Prices")
ggsave("../images/house_prices.svg", device = "svg")
houses_smaller <- houses %>%
select(TOTAL_VALUE, TAX, LOT_SQFT, YEAR, GROSS_AREA, LIVING_AREA)
ggpairs(houses_smaller)
ggsave("../images/house_plots.svg", device = "svg")
houses_smaller <- houses %>%
select(TOTAL_VALUE, FLOORS, ROOMS, BEDROOMS, KITCHEN, FIREPLACE, REMODEL, FULL_BATH, HALF_BATH)
houses %>%
ggplot(aes(x = REMODEL, y = TOTAL_VALUE)) +
geom_boxplot() +
theme_minimal() +
ylab("Total Value (Thousands)") +
xlab("") +
ggtitle("West Roxbury Housing Prices by Remodel Status")
house_model <- lm(TOTAL_VALUE ~ . - TAX, data = houses) # omit tax to avoid overfitting
summary(house_model)
house_model <- lm(TOTAL_VALUE ~ . - TAX - ROOMS - BEDROOMS, data = houses)
summary(house_model)
house_coefs <- tidy(house_model, conf.int = TRUE) %>%
filter(term != "(Intercept)")
house_coefs
glance(house_model)
knitr::kable(house_coefs, "html", caption = "Housing Price Coefficients") %>%
kable_styling() %>%
as_image(file = "../images/house_table.png")
ggplot(house_coefs,
aes(x = estimate,
y = fct_rev(term))) +
geom_pointrange(aes(xmin = conf.low,
xmax = conf.high)) +
geom_vline(xintercept = 0,
color = "purple") +
theme_minimal() +
ylab("") +
ggtitle("Housing Price Coefficients")
ggsave("../images/house_coefs.svg", device = "svg")
![Housing Price Coefficients](../images/house_coefs.svg)
